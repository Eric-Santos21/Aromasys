{% extends "admin_layout.html" %}
{% set title = 'Pedido #' ~ order.id %}
{% set active_page = 'pedidos' %}

{% block content %}
<div class="checkout-box">
  <h3>Informações do Pedido</h3>
  <p><strong>Data:</strong> {{ order.date.strftime('%d/%m/%Y %H:%M') }}</p>
  <p><strong>Status:</strong> {{ order.status }}</p>
  <hr>
  <h4>Cliente</h4>
  <p><strong>Nome:</strong> {{ order.user.nome }}</p>
  <p><strong>E-mail:</strong> {{ order.user.email }}</p>
  <p><strong>Telefone:</strong> {{ order.user.telefone|format_phone }}</p>
  <p><strong>Endereço:</strong> {{ order.user.enderecos or '—' }}</p>
  <hr>
  <h4>Pagamento</h4>
  <p><strong>Forma:</strong> Cartão de Crédito</p>  <!-- ajuste quando houver campo -->
  <hr>
  <h4>Itens</h4>
  <table class="admin-table">
    <thead><tr><th>Produto</th><th>Qtd</th><th>Preço</th></tr></thead>
    <tbody>
      {% for item in order.items %}
      <tr>
        <td>{{ item.product.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>R$ {{ '%.2f'|format(item.product.price * item.quantity) }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <p style="text-align:right;margin-top:10px">
    <strong>Total: R$ {{ '%.2f'|format(order.total) }}</strong>
  </p>
</div>
{% endblock %}