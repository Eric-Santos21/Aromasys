{% extends "admin_layout.html" %}

<!-- Define o título que o admin_layout.html vai usar -->
{% set title = 'Gerenciador de Pedidos' %}
{% set active_page = 'pedidos' %}

{% block content %}
<div class="checkout-box">
    <table class="admin-table">
        <thead>
            <tr>
                <th>Nº Pedido</th>
                <th>Data</th>
                <th>Cliente</th>
                <th>Valor Total</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td><strong>{{ order.id }}</strong></td>
                <td>{{ order.date }}</td>
                <td>{{ order.user.nome }}<br><small>{{ order.user.telefone|format_phone }}</small></td>
                <td>R$ {{ "%.2f"|format(order.total) }}</td>
                <td>
                    {% if order.status == 'Entregue' %}
                        <span class="order-status status-delivered">{{ order.status }}</span>
                    {% elif order.status == 'Cancelado' %}
                        <span class="order-status status-cancelled">{{ order.status }}</span>
                    {% else %}
                        <span class="order-status">{{ order.status }}</span>
                    {% endif %}
                </td>
                <td class="table-actions">
                    <a href="{{ url_for('admin_pedido_detalhes', order_id=order.id) }}" class="btn-secondary btn-small"><i class="fas fa-eye"></i> Detalhes</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}