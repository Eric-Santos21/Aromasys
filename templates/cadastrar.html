<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Conta - AromaSys</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="login-page-body">
    
    <div class="login-container register-container"> <h1><a href="{{ url_for('home') }}" class="header-logo">AromaSys</a></h1>
        <p>Crie sua conta para uma experiência completa.</p>
        
        <form action="{{ url_for('cadastrar') }}" method="POST" class="card-form register-form">
            <div class="form-group">
                <label for="nome-completo">Nome Completo</label>
                <input type="text" id="nome-completo" name="nome" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" required maxlength="14">
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone</label>
                    <input type="text" id="telefone" name="telefone" placeholder="(00) 90000-0000" required maxlength="15">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirmar Senha</label>
                    <input type="password" id="confirm-password" name="confirm_password" required>
                </div>
            </div>
            
            <button type="submit" class="btn-primary">Criar Conta</button>
        </form>
        
        <a href="{{ url_for('login') }}" class="link-voltar">Já tem conta? Faça login</a>
    </div>

</body>

<!-- ======================= -->
<!-- (NOVO) SCRIPT PARA MÁSCARAS -->
<!-- ======================= -->
<script>
document.addEventListener('DOMContentLoaded', function() {

    // Função que só permite números
    function restrictToNumbers(event) {
        if (event.isComposing || event.keyCode === 229) return;
        if ([46, 8, 9, 27, 13, 110, 190].includes(event.keyCode) ||
            (event.keyCode === 65 && (event.ctrlKey === true || event.metaKey === true)) ||
            (event.keyCode >= 35 && event.keyCode <= 40)) {
            return; 
        }
        if ((event.shiftKey || (event.keyCode < 48 || event.keyCode > 57)) && (event.keyCode < 96 || event.keyCode > 105)) {
            event.preventDefault();
        }
    }

    // --- Campo CPF ---
    const cpfInput = document.getElementById('cpf');
    if (cpfInput) {
        cpfInput.addEventListener('keydown', restrictToNumbers);
        
        // Adiciona os pontos e traço
        cpfInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Só números
            if (value.length > 9) {
                value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            } else if (value.length > 6) {
                value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, '$1.$2.$3');
            } else if (value.length > 3) {
                value = value.replace(/(\d{3})(\d{1,3})/, '$1.$2');
            }
            e.target.value = value;
        });
    }

    // --- Campo Telefone ---
    const telefoneInput = document.getElementById('telefone');
    if (telefoneInput) {
        telefoneInput.addEventListener('keydown', restrictToNumbers);

        // Adiciona parênteses e traço
        telefoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 10) {
                value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            } else if (value.length > 6) {
                value = value.replace(/(\d{2})(\d{4})(\d{1,4})/, '($1) $2-$3');
            } else if (value.length > 2) {
                value = value.replace(/(\d{2})(\d{1,5})/, '($1) $2');
            } else if (value.length > 0) {
                value = value.replace(/(\d{1,2})/, '($1');
            }
            e.target.value = value;
        });
    }
});
</script>

</html>